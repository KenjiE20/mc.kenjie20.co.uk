name: Build Hugo site

runs:
  using: composite
  steps:
    - name: Checkout repo
      uses: actions/checkout@v4
      with:
        submodules: true  # Fetch Hugo themes (true OR recursive)
        fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

    - name: Setup Hugo
      uses: peaceiris/actions-hugo@v3
      with:
        hugo-version: "latest"
        extended: true

    #- name: Clone theme
    #  run: git submodule update --init --recursive

    - name: Hugo build
      run: hugo --cleanDestinationDir --gc --minify

    - name: Clean hanging theme image
      run: rm -vd public/images/gohugo-default-sample-hero-image.jpg
